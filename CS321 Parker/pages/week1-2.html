<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pen Order Form</title>

    <script type="text/javascript">

        function getSafeInt(num) {
            return parseInt(num, 10) || 0;
        }

        function calculatePrice(myData) {
            var price = 4.25;
            var taxRate = 0.07;
            var shippingRate = 0.02;
            var orderedCount = myData.getNumberOfItems();

            var unadjusted = price * orderedCount;
            var taxExtra = unadjusted * taxRate;
            var shippingExtra = unadjusted * shippingRate;

            var totalPrice = unadjusted + taxExtra + shippingExtra;
            myData.priceData = {
                totalPrice: totalPrice,
                taxes: taxExtra,
                shipping: shippingExtra,
                price: unadjusted,

                getPrice: function () {
                    return this._getFormatted(this.price);
                },
                getTotalPrice: function () {
                    return this._getFormatted(this.totalPrice);
                },
                getTaxes: function () {
                    return this._getFormatted(this.taxes);
                },
                getShipping: function () {
                    return this._getFormatted(this.shipping);
                },

                _getFormatted: function (num) {
                    return "$" + num.toFixed(2);
                }
            };

        }
        function appendLine(string) {
            return string + "<br>"
        }

        function messageUser(myData) {
            var message = appendLine("Thank you " + myData.cusName + " for your order");

            var items = myData.getNumberOfItems() != 1 ? "items" : "item";
            message += appendLine("You will receive " + myData.getNumberOfItems() + " " + items + " delivered to you on " + myData.delDate);
            message += appendLine("Your price of your " + items + " is " + myData.priceData.getPrice());
            message += appendLine("The tax charge is " + myData.priceData.getTaxes());
            message += appendLine("The shipping charge is " + myData.priceData.getShipping());
            message += appendLine("Your total is " + myData.priceData.getTotalPrice());
            document.write(message);
        }

        function calculateTotal() {
            var myData = {};
            var customerNameElement = document.getElementById("customerName");
            var deliveryDateElement = document.getElementById("deliveryDate");
            var numberItemsElement = document.getElementById("numberItems");

            myData.cusName = customerNameElement.value;
            myData.delDate = deliveryDateElement.value;
            myData.numItems = numberItemsElement.value;
            myData.getNumberOfItems = function () {
                return getSafeInt(this.numItems)
            };

            calculatePrice(myData);
            messageUser(myData);
        }

    </script>

</head>
<body>
<form id="PenOrderForm" name="PenOrderForm">
    <h1>Pen Order Form</h1>
    <p>
        <label for="customerName">Name</label>
        <input id="customerName" type="text">
    </p>
    <p>
        <label for="deliveryDate">Delivery Date</label>
        <input id="deliveryDate" type="text">
    </p>
    <p>
        <label for="numberItems">Number of Items</label>
        <input id="numberItems" type="text">
    </p>
    <p>
        <input type="submit" value="Order" onclick="calculateTotal();return false;">
    </p>
</form>
</body>
</html>